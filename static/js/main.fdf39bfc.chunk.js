(this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]=this["webpackJsonpsd-0x-project-react-context-hooks-starwars-datatable-filters"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),u=a(8),l=a.n(u),c=(a(16),a(3)),o=a(5),i=a(1),m=Object(n.createContext)();var s=function(){var e=Object(n.useContext)(m),t=e.setFilterName,a=e.getFilterNumeric,u=e.allFilters,l=Object(n.useState)({column:"population",comparison:"maior",value:0}),s=Object(i.a)(l,2),f=s[0],p=s[1],b=function(e){var t=e.target,a=t.name,n=t.value;p(Object(o.a)(Object(o.a)({},f),{},Object(c.a)({},a,n)))};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a({column:f.column,comparison:f.comparison,value:f.value})}},r.a.createElement("label",{htmlFor:"name"},"Filtrar por nome",r.a.createElement("input",{type:"text","data-testid":"name-filter",name:"name",id:"name",onChange:function(e){var a=e.target.value;t(a)}})),r.a.createElement("select",{"data-testid":"column-filter",name:"column",onChange:b},u.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("select",{"data-testid":"comparison-filter",name:"comparison",onChange:b},r.a.createElement("option",{value:"maior que"},"maior que"),r.a.createElement("option",{value:"menor que"},"menor que"),r.a.createElement("option",{value:"igual a"},"igual a")),r.a.createElement("input",{type:"number","data-testid":"value-filter",name:"value",onChange:b}),r.a.createElement("button",{type:"submit","data-testid":"button-filter"},"Filtrar"))};var f=function(){var e=Object(n.useContext)(m),t=e.data,a=e.isLoading,u=e.allData;return t.length>0&&!a?r.a.createElement("main",null,r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(t[0]).map((function(e){return"residents"===e?null:r.a.createElement("th",{key:e},e)})))),r.a.createElement("tbody",null,u.map((function(e,t){return r.a.createElement("tr",{key:t},Object.entries(e).map((function(e){return"residents"===e[0]?null:r.a.createElement("td",{key:e[1]},e[1])})))}))))):r.a.createElement("span",null,"Carregando...")},p=a(10),b=a(6),d=a.n(b),v=a(9),j=function(){return fetch("https://swapi-trybe.herokuapp.com/api/planets/").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};var E=function(e){var t=e.children,a=Object(n.useState)(!1),u=Object(i.a)(a,2),l=u[0],c=u[1],o=Object(n.useState)([]),s=Object(i.a)(o,2),f=s[0],b=s[1],E=Object(n.useState)(["population","orbital_period","diameter","rotation_period","surface_water"]),O=Object(i.a)(E,2),h=O[0],g=O[1],y=Object(n.useState)(""),k=Object(i.a)(y,2),x=k[0],N=k[1],F=Object(n.useState)([]),C=Object(i.a)(F,2),w=C[0],S=C[1];Object(n.useEffect)((function(){(function(){var e=Object(v.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),e.next=3,j();case 3:t=e.sent,b(t.results),c(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var q=f,B=h;x&&(q=q.filter((function(e){return e.name.includes(x)}))),w.map((function(e){var t=e.column;return B.filter((function(e){return t===e?B.splice(B.indexOf(e),1):null}))})),w.filter((function(e){var t=e.column,a=e.comparison,n=e.value;return"maior que"===a?q=q.filter((function(e){return Number(e[t])>Number(n)})):"menor que"===a?q=q.filter((function(e){return Number(e[t])<Number(n)})):"igual a"===a&&(q=q.filter((function(e){return Number(e[t])===Number(n)}))),q}));var D={isLoading:l,data:f,allFilters:B,allData:q,filters:{filterByName:{name:x},filterByNumericValues:w},setFilterName:N,getFilterNumeric:function(e){S([].concat(Object(p.a)(w),[e]))},setFilterColumn:g};return r.a.createElement(m.Provider,{value:D},t)};var O=function(){return r.a.createElement(E,null,r.a.createElement(s,null),r.a.createElement(f,null))};l.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.fdf39bfc.chunk.js.map